%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Results}
\label{chap:results}

In order to evaluate the the algorithms, analysis is organised around the four characteristics of swarm robotics algorithms. Section \ref{overview} focuses on providing a general overview of algorithm performances, and the motivation for the development of an algorithm that can adapt to item type ratio is presented in section \ref{relationship}. %TODO: Don't know if this fits.

 Section \ref{Adaptability} highlights how efficiently the honey bee algorithm adapts to item type ratio. %Analysis of the other performance measures, a discussion of the performance per individual environment type,  as well as scalability study for grid sizes, number of robots and percentage of objects, will be left for a future publication. 

\section{General Overview}
\label{overview}
When comparing two foraging algorithms, a pairwise Wilcoxon test was performed to determine if a statistical difference occurs, at a significance level of 95\%. The test was performed over all environments. The null  hypothesis is that the results of the two algorithms come from the same distribution. Table \ref{summarytable} gives a final algorithm ranking where 2 is the best performing algorithm and 0 is the worst performing algorithm.

\begin{table}
\centering
    \caption{The overall Pairwise Mann Whitney U ranking, averages and standard deviations of for $\sigma$ for each algorithm}
        \label{summarytable}
    \begin{tabular}{l|lll}
    \hline \hline
    Algorithms & Wins & Average & Std Dev \\ \hline
    Naive      & 0    & 0.528   & 0.394  \\
    Desert Ant  & 1    & 0.643   & 0.387  \\
    Honey Bee   & 2    & 0.807   & 0.294  \\

    \hline
    \end{tabular}
\end{table}

Statistical tests indicate a significant difference between the results of all algorithms. Desert ant foraging performed better than na\"ive foraging showing the positive effect of site fidelity. The honey bee algorithm out-performed the na\"ive foraging algorithm and desert ant algorithm indicating the positive effect of communication and adaptivity of the honey bee foraging algorithm. The standard deviation is high for all algorithms due to the extremely large variations in the environments provided.


\section{Flexibility}
\label{results:flexibility}

In real life environments, it's rarely feasible to optimize parameters per the environment in which a swarm of robots needs to be introduced. As a result, it's important that swarm robotics algorithms are insensitive to environment types and either have a set of parameters that generalize well or have the ability to adapt their parameters to an unseen environment.

In order to determine the flexibility of the three proposed foraging algorithms, the effect of the ratio of item types in the environment as well as the effect on different types of distributions of gold and waste items in the environments is analysed. The more insensitive an algorithm is to the change in environmental parameters, the more flexible the algorithm. 

\subsection{Environment Item Ratio}
\label{results:ratio}

Environment item ratio refers to the ratio of prioritized items to non-prioritized items $\tau$. In order to truly analyse the effects of the environment, one should optimize each algorithm for all the environments as there may exist a parameter set for the algorithms that performs well over all environments. For this reason, we first analyse 2 hypothesis about the dependency of the performance of an algorithm in environments with a particular item ratio and the actual specialization of the robots themselves


\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/gold_ratio.tex}}
\caption{Prioritized items over time over ratio of Items in Environment for each algorithm }
\label{ratiogoldplot}
\end{figure}



\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/waste_ratio.tex}}
\caption{Non-prioritized items over time over ratio of Items in Environment for each algorithm}
\label{ratiowasteplot}
\end{figure}

\subsubsection{Analysis of Relationship between Item Ratio in Environment and Specialization Ratio of Robots}
\label{relationship}

The following hypotheses are addressed:
\begin{enumerate}
\item An algorithm that forages a portion of non-prioritized items will have greater performance than an algorithm that does not forage any non-prioritized items.
\item Algorithm performance depends on the $r$ as well as $\tau$ and that as $r$ increases, the value of $\tau$ that yields the greatest value of $\sigma$, $\tau_{best}$, will increase approximately linearly for the na\"ive and desert ant algorithms.
\end{enumerate}

An algorithm configured with $\tau=1$ is where only prioritized items are foraged. Analysing Table \ref{ratio}, for the na\"ive and desert ant algorithms, for all values of $r$ where $r \neq 1$, $\tau_{best}$ is never equal to $1$, proves the hypothesis that the algorithms achieved the best performance when some robots are configured to forage non-prioritized items. The result may be because non-prioritized items are moved out of the way to allow for easier, faster access to prioritized items or allow access to inaccessible prioritized items.


\begin{table} [h]
     \caption{The performance, $\sigma$, for each foraging algorithm, for each combinations of $r$ and $\tau$. If $\tau_{best}$ exists, $\tau_{best}$ is provided. The best value of $\sigma$ is shown in bold.}
     \label{ratio}
	\centering
	\footnotesize
    \begin{tabular}{|c|c||l|l|l|l|l|l|l|l|l||l|}
	\hline    & & \multicolumn{9}{ |c|| } {$\tau$} &   \\ 
    \cline{3-11}
\multirow{-2}{*}{Algorithm}  &  \multirow{-2}{*}{$r$} & 0     & 0.2   & 0.25  & 0.333 & 0.5   & 0.667  & 0.75  & 0.8    & 1   & \multirow{-2}{*}{$\tau_{best}$ } \\ \hline
    &0     & 1 & 1     & 1     & 1     & 1     & 1     & 1     & 1     & 1     & \\
    &0.2   & 0 & 0.492 & 0.526 & 0.567 & \textbf{0.597} & 0.595 & 0.587 & 0.577 & 0.471 & 0.5 \\
    &0.25  & 0 & 0.484 & 0.526 & 0.557 & 0.588 & \textbf{0.595} & 0.585 & 0.575 & 0.477 & 0.667\\
    &0.333 & 0 & 0.467 & 0.507 & 0.544 & 0.586 & \textbf{0.596} & 0.592 & 0.584 & 0.495 & 0.667\\
    &0.5   & 0 & 0.428 & 0.46  & 0.508 & 0.568 & 0.588 & \textbf{0.591} & 0.589 & 0.528 & 0.75\\
    &0.667 & 0 & 0.4   & 0.433 & 0.487 & 0.544 & 0.583 & \textbf{0.591} & 0.593 & 0.554 & 0.75 \\
    &0.75  & 0 & 0.377 & 0.425 & 0.47  & 0.531 & 0.576 & 0.585 & \textbf{0.591} & 0.567 & 0.8\\
    &0.8   & 0 & 0.372 & 0.409 & 0.455 & 0.53  & 0.571 & 0.584 & \textbf{0.592} & 0.575 & 0.8\\
\multirow{-9}{*}{Na\"ive}&    1     & 0 & 0.336 & 0.375 & 0.433 & 0.5   & 0.552 & 0.57  & 0.581 & \textbf{0.618} & 1\\
     \hline
 &   0                    & 1 & 1     & 1     & 1     & 1     & 1     & 1     & 1     & 1       &    \\
&    0.2                  & 0 & 0.698 & 0.724 & \textbf{0.737} & \textbf{0.737} & 0.712 & 0.694 & 0.67  & 0.519 & 0.333\\
&    0.25                 & 0 & 0.678 & 0.711 & 0.73  & \textbf{0.735} & 0.715 & 0.697 & 0.673 & 0.530 & 0.5 \\
&    0.333                & 0 & 0.65  & 0.693 & 0.722 & \textbf{0.739} & 0.725 & 0.71  & 0.686 & 0.562 & 0.5\\
&    0.5                  & 0 & 0.596 & 0.645 & 0.684 & 0.729 & \textbf{0.734} & 0.725 & 0.701 & 0.621 & 0.667\\
&    0.667                & 0 & 0.554 & 0.607 & 0.648 & 0.706 & 0.737 & \textbf{0.738} & 0.716 & 0.675 & 0.75\\
&    0.75                 & 0 & 0.533 & 0.587 & 0.63  & 0.691 & 0.731 & \textbf{0.739} & 0.72  & 0.703  & 0.75 \\
&    0.8                  & 0 & 0.523 & 0.577 & 0.62  & 0.682 & 0.725 & 0.736 & \textbf{0.74}  & 0.718 & 0.8\\
\multirow{-9}{*}{Desert Ant}&    1                    & 0 & 0.488 & 0.543 & 0.588 & 0.654 & 0.702 & 0.718 & 0.726 & \textbf{0.758} & 1\\ \hline
    %Honey Bee
&        0  & 1     & 1     & 1     & 1     & 1     & 1     & 1     & 1     & 1  &   \\
&    0.2                  & \textbf{0.687} &\textbf{0.687} & 0.686 & 0.686 & 0.686 & 0.685 & 0.686 & 0.685 & \textbf{0.687} &\\
&    0.25                 & 0.678 & \textbf{0.679} & 0.678 & 0.678 &\textbf{0.679} & \textbf{0.679} & 0.678 & 0.677 & \textbf{0.679} &\\
&    0.333                & \textbf{0.674} & \textbf{0.674} & \textbf{0.674} & \textbf{0.674} & \textbf{0.674} & \textbf{0.674} & 0.673 & \textbf{0.674} &\textbf{0.674} &\\
&    0.5                  & 0.668 & \textbf{0.669} & 0.668 & 0.668 & 0.668 & 0.668 & 0.668 & 0.668 & \textbf{0.669} &\\
&    0.667                & 0.671 & 0.671 & 0.671 & 0.671 & 0.671 & \textbf{0.672} & 0.671 & 0.671 & 0.671 &\\
&    0.75                 & 0.672 & \textbf{0.673} & 0.671 & 0.671 & 0.672 &\textbf{0.673} & 0.672 & \textbf{0.673} & \textbf{0.673}&\\
&    0.8                  & 0.674 & 0.674 & 0.674 & 0.674 & 0.674 & \textbf{0.675} &  \textbf{0.675} &  \textbf{0.675} & \textbf{0.675}& \\
\multirow{-9}{*}{Honey Bee}&    1                    & \textbf{0.691} & 0.69  & \textbf{0.691} & 0.69  & \textbf{0.691} &  \textbf{0.691}& 0.69  & 0.69  & 0.69  &\\ \hline

    \end{tabular}

\end{table}

Fig \ref{desertantplot} shows the region in parameter space where the desert ant algorithm performs the best. The na\"ive and desert ant algorithms performed best when $\tau$ was slightly greater than $r$. The existence of the relationship motivates the development of an algorithm that adapts $\tau$ to correspond the environment item ratio $r$.

\begin{figure}[!htb]
\centering
\resizebox{0.8\textwidth}{!}{\input{chapters/chapter6/desertantplot.tex}}
\caption{Contour plot of values for $\sigma$ over values for $r$ and $\tau$ for desert ant foraging}
\label{desertantplot}
\end{figure}


%\begin{figure}
%\input{naiveplot.tex}
%\caption{Contour plot of values for $\sigma$ over values for $r$ and $\tau$ for nai%\"ve foraging}
%\end{figure}

 %But why? Give reason 
%The nai\"ve foraging algorithm slowly clear an entire area around the sink. If there is an equal ratio of robot types to item types then this area would be cleared effectively. 
 %fact that in the more organized environments such as gaussian or vein, it is 

\subsubsection{Adaptability of the Honey Bee Foraging Algorithm to Item Type Ratio and Comparison to the Na\"ive the Desert Ant Algorithms}
\label{Adaptability}
Analysis of Table \ref{ratio} indicates that the honey bee foraging algorithm has similar performance throughout all configurations for $r$ and $\tau$, which highlights that the performance of the honey bee algorithm is independent of the configuration of $\tau$, resulting in an algorithm that is more flexible and robust. This could mean that the honey bee algorithm could perform well in dynamic environments where robots and items can be destroyed.

However, according to Table \ref{ratio}, the desert ant algorithm performs better than the honey bee algorithm, for particular configurations of $r$ and $\tau$. This indicates that, if the value of $r$ is known for a particular environment, then it is beneficial to use desert ant foraging and choose $\tau$ appropriately. A possible reason why the desert ant algorithm performs better when optimally configured for a particular environment than the honey bee algorithm is that the honey bee algorithm takes time to adapt to the environment, while the desert ant algorithm with optimal configurations has no division of labour overhead and may outperform the honey bee algorithm under those circumstances.

\subsection{Environmental Types}
\label{results:environmentaltypes}

It is possible that the algorithms will perform differently on different types of environments by exploiting their ability to memorize and communicate the location of areas with a high prioritized item density or conversely by exploiting their ability to explore. The performance of the algorithms is analysed over the different types of environments. As a result, the following hypotheses are explored:  

\begin{enumerate}
	\item The na\"ive foraging algorithm will perform better on environments with a uniform distribution compared to the clustered, and especially the vein and Gaussian environments, due to the algorithms inability to return to areas with high item density. 
	\item The desert ant foraging algorithm will perform better on clustered, Gaussian and vein environments environments due to the ability to remember locations.
	 \item The honey bee foraging algorithm will perform best on Gaussian distribution environments since it will be able to recruit members to explore and forage even quicker than the desert ant. Honey bee will likely perform worse on the uniformly distributed environments as there may be time wasted recruiting robots to areas which do not especially contain prioritized items.
\end{enumerate}

\begin{figure}[!htb]
\centering
\includegraphics[width=\textwidth]{chapters/chapter6/graphs/gold_environment.pdf}
\caption{Prioritized items over time per environment type for each algorithm}
\label{environmentgoldplot}
\end{figure}

\begin{table} [h]
     \caption{Prioritized Items over Time over Item Density in Environment for each Algorithm}
     \label{ratio}
	\centering
	\footnotesize
	\input{chapters/chapter6/tables/AvgDev_GoldItemsOverTime_Environment_objects.tex}
\end{table}

\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/gold_objects.tex}}
\caption{Prioritized Items over Time over Item Density in Environment  for each Algorithm}
\label{objectgoldplot}
\end{figure}


\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/waste_objects.tex}}
\caption{Non-prioritized Items over Time over Item Density in Environment for each Algorithm}
\label{objectgoldplot}
\end{figure}

%Discussion
All algorithms are shown to degrade quite heavily as the items density increases, but that is plausibly because there was a limit on simulation time. To adequately analyse the performance over items one would have to allow more time to simulations. 

\section{Robustness}
\label{results:robustness}

%Intro discussion


\subsection{Specialization}
\label{results:specialization}

%Desert Ant algorithm
%Has optimal configuration that is unaffected by ratio. 
%Honey bee: 
%Does the division of labour benefit the algorithm.
%No, not in static context? Why? 
%Possibly in a dynamic context? Discussion. Future work

\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/gold_division.tex}}
\caption{Prioritized items over time over ratio of robots in environment for each algorithm }
\label{divisiongoldplot}
\end{figure}


\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/waste_division.tex}}
\caption{Non-prioritized items over time over ratio of robots in environment for each algorithm}
\label{divisionwasteplot}
\end{figure}

%Discuss Naive
The na\"ive algorithm has been shown to perform worst out of all algorithms. The overall trend is that as the ratio of robots foraging the prioritized type increases, the performance of the na\"ive algorithm increases. An interesting observation is that a robot specialization ratio $r=0.8$ results in the best performance, while $r=1$, where all robots are foraging prioritized items has slightly less effective performance. This can be attributed to the fact that foraging a portion of non-prioritized items benefits the algorithm.       

%Discuss Desert Ant
The desert ant algorithm shows similar trends to the na\"ive algorithm with performance peaking around $r=0.8$ . 

%Discuss Honey Bee Trend
Honey bee is consistent over division, showing that the honey bee algorithm does indeed perform division of labour to some level of adequacy. The desert ant does however outperform the honey bee algorithm on most of the configurations. There is space for the honey bee algorithm to be optimized so to more adequately compare the algorithms, one would have to optimize the parameters. 

Why do none of the other graphs reflect the fact that the honey bee algorithm is outperformed by the na\"ive algorithm? The overall results are most likely skewed by the $r=0$ where no desert ant robots can forage prioritized items. 

Possible reasons that the desert ant algorithm may outperform the honey bee algorithm are discussed below:
\begin{enumerate}
\item The honey bee division of labour does not perfectly divide labour between the item types.
\item Honey bee algorithm has a limiting factor such as one of the unoptimized parameters $f_{max}$ and $t_{max}$. 
\item The process of the division of labour is slowing down the algorithm to some degree.
\end{enumerate}

%TODO: Filter out r=0 

\section{Scalability}
\label{results:scability}
Scalability is a key feature of swarm robotics. In order to examine the scalability of the proposed foraging algorithms, the performance of algorithms is compared over robot densities. 

\subsection{Robot Density}
\label{results:numberenvironments}

%Mann Whitney U tables

%Graphs comparing performance of # of robots, per algorithm,  2 performance measures.
\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/gold_robots.tex}}
\caption{Density of Robots }
\label{robotsgoldplot}
\end{figure}

\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/waste_robots.tex}}
\caption{Non-prioritized items over Time over Robot Density}
\label{robotswasteplot}
\end{figure}

%Discussion
The purpose of examining the effect of additional robots is to determine whether the addition of extra robots negatively effects the algorithm's performance. An algorithm that would scale perfectly would show a linear increase in performance as the number of robots increases. A slow down in the rate of improvement could allude to a few possibilities as follows:

\begin{itemize}
\item That the robots manage to successfully forage the entire environment and thus addition of robots makes no difference.
\item That the addition of more robots creates interference between the robots or causes malfunction within the algorithms thus impacting scalability. 
\end{itemize}

Figure~\ref{robotswasteplot} displays the logarithmic trend line, the equation of the trend-line and the value of the coefficient of determination, $r^2$, is shown. Honey-bee has the greatest slope which means it is the least negatively affected by the increase in robots, followed by desert ant soon after and na\"ive foraging being the most effected by an increase in robots. 

%Why?
%The lower b is, the slower the rate at which the algorithm degrades as robot density increases

\subsection{Energy}
\label{results:energy}

%GET THIS GRAPH
Since energy usage was not the focus of this study, the process of assigning and monitoring energy usage to the various foraging tasks was not performed and was not considered a major metric for this study. However it is worth mentioning that the honey bee algorithm does have some waiting time where less or no energy would be spent, where as the na\"ive and desert ant algorithms do not save energy by going into a hibernation or resting state. It is thus potentially worth analysing the amount of time that the robots spend waiting at the sink in the honey bee algorithm to see if energy saving actually occurred due to active to inactive forager division of labour capabilities of the honey bee algorithm. 

One would expect the amount of time spent waiting to increase as robot density increases and the environment becomes saturated by robots since more robots would fail to find items and return to the waiting state. The graph indicates that a surprisingly small amount of time was spent waiting at the sink regardless of the robot density which tends to imply that there is room for improvement in the active to inactive forager division of labour strategy such that robots are more inefficient robots. 

One should also keep in mind that although this seems to imply that the honey bee algorithm performs more efficiently, the comparison is quite limited since the task of direct communication is likely to, in practice, be a very expensive activity energy-wise.

\subsection{Environment Size}
\label{results:environmentsize}

%As environment size increases, how does the algorithm performance suffer

%Mann whitney U + average etc etc
%Graphs compareing performacne of # robots, per algorith, for each performance measure 2 performance measures

%NEED TABLES!!!!!!!!!

\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/gold_sizes.tex}}
\caption{Environment Size}
\label{sizegoldplot}
\end{figure}

\begin{figure}[!htb]
\centering
\resizebox{\textwidth}{!}{\input{chapters/chapter6/graphs/waste_sizes.tex}}
\caption{Non-prioritized items over time for different environment sizes for each algorithm}
\label{sizewasteplot}
\end{figure}

%Discussion
It should be noted that as the environment size increases, that the number of robots assigned to each environment will also increase since the number of robots is based on a percentage of $S$, the environment size.


%Need help here
As the environment size increases, one would expect the performance to get quadratically less since the algorithms were run for the same amount of time. For this analysis, the experiments would ideally be run until no more items can be foraged, but due to time constraints only a limited study could be performed. 

Analysing each algorithm individually a few observations are evident:
- The honey bee algorithm seems to be the least scalable since the jump in performance between the smallest environment of 50x50 cells and the environment that is next largest - the 100x100 cells is larger than either of the other two algorithms. This can likely be attributed to the fact that honey bee model that the algorithm was based on requires us to define the maximum time spent exploring for items, $f_{max}$ which will favour search close to the hive. The parameter $f_{max}$ is set far to low to work adequately in large environments. These parameters could likely be optimized for the large environments. What this shows is that the honey bee algorithm is sensitive to increases in environment size and thus less scalable and flexible since it requires extra optimization. In future, a probability-based technique could be used to slowly increase the probability of stopping a search as time increases. 

Performance of the desert ant algorithm is the least affected by size of the environment.(quote some figures). This is likely because the desert ant algorithm does not have the same parameters that limit the depth of exploration where as honey bee does. Thus desert ant wins at scalability due to less parameters. 


%Compare each one to how it should have performed - so that each algorithm gets a trendline.
%Think about how the number of robots increases
% 50 = 50 x 50 = 2500. 
% 100 = 100^2 = 10000 performance should be 25% of that of 50x50. but has twice as many robots as 50 and thus...
% 200 = 200^2 = 40000 performance should be 25% of that of 100x100 but has twice as many robots as 100 and thus... 
% 300 = 300^2 = 90000 performance should be 44% of that of 200x200 but has a 3rd more robots as 200
% 500 = 500^2 = 250000 performance should be 36% of that of 300x300 but has 2/5ths more robots than 300
% Ask prof or leave out
% Or think a little more. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Summary}
\label{results:summary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%